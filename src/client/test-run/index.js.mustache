(function () {
    if (window !== window.top)
        return;

    var testRunId           = '{{{testRunId}}}';
    var windowId            = '{{{windowId}}}';
    var selectorTimeout     = {{{selectorTimeout}}};
    var browserHeartbeatUrl = '{{{browserHeartbeatUrl}}}';
    var browserStatusUrl    = '{{{browserStatusUrl}}}';
    var skipJsErrors        = {{{skipJsErrors}}};
    var dialogHandler       = {{{dialogHandler}}};

    var ClientDriver = window['%testCafeDriver%'];
    var driver       = new ClientDriver(
        { testRun: testRunId, window: windowId },
        { heartbeat: browserHeartbeatUrl, status: browserStatusUrl },
        { selectorTimeout: selectorTimeout, skipJsErrors: skipJsErrors, dialogHandler: dialogHandler }
    );

    driver.start();
})();
